#!/usr/bin/env -S scala-cli shebang --server=false

//> using scala "3.3.0"
//> using file backup-db-utils.scala
//> using dep "com.lihaoyi::os-lib:0.9.1"

if args.length != 2 then
  System.err.println(s"Usage: ${scriptPath} <hostname-or-other-discriminator> <maybe-rclone-base-destpath>")
  System.exit(1)

object PostgresBackupDbRunner extends BackupDbRunner:
  def extractHostname( args : Array[String] ) : String = args(0)
  def extractDestpath( args : Array[String] ) : String = args(1)
  
  def computeDoBackupParsedCommand( args : Array[String], backupFilePath : os.Path ) : List[String] = List("postgres-dump-all-to-file", backupFilePath.toString)

  def displayDbName    : String = "Postgres"
  def dumpFileCoreName : String = "pgdumpall"

PostgresBackupDbRunner.performDbBackup(args)








