#!/usr/bin/env -S scala-cli shebang --server=false --suppress-directives-in-multiple-files-warning

//> using file ../project.scala

import com.mchange.sysadmin.taskrunner.*
import com.interfluidity.officehours.*

val taskRunner = TaskRunner[Unit]
import taskRunner.*

val task = new Task:
  val name = "Weekly office hours setup"
  val init = ()
  val bestEffortSetups = Set.empty
  val singleStep =
    Step.Arbitrary("Create notes and send weekly mail"): ( prior, self ) =>
      createAndSendThisWeeksNote()
      Step.Result.onward( () )
  val sequential = List( singleStep )
  val bestEffortFollowups = Set.empty

val reporters = Reporters.default()

runAndReport(task,reporters)
